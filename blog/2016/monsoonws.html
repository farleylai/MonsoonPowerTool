<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>Monsoon Power Tool Web Service for Scripting</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="keywords" content="">
    <meta name="generator" content="JBake">

    <!-- Le styles -->
    <link href="../../css/bootstrap.min.css" rel="stylesheet">
    <link href="../../css/asciidoctor.css" rel="stylesheet">
    <link href="../../css/base.css" rel="stylesheet">
    <link href="../../css/prettify.css" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <!--<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">-->
    <link rel="shortcut icon" href="../../favicon.ico">
  </head>
  <body onload="prettyPrint()">
    <div id="wrap">
   

	
		<!-- Fixed navbar -->
    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="../../notes/about.html">Farley Lai</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="../../index.html">Blog</a></li>
            <li><a href="../../notes/projects.html">Projects</a></li>
            <li><a href="../../notes/research.html">Research</a></li>
            <li><a href="../../notes/events.html">Events</a></li>
            <li><a href="../../notes/art.html">Art</a></li>
            <li><a href="../../archive.html">Archive</a></li>
            <li><a href="../../feed.xml">Feed</a></li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">Shortcut <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="../../notes/linux.html">Linux</a></li>
                <li><a href="../../notes/groovy.html">Groovy</a></li>
                <li><a href="../../notes/tools.html">Tools</a></li>
                <li><a href="../../notes/resources.html">Resources</a></li>
                <li class="divider"></li>
                <li class="dropdown-header">Compiler</li>
                <li><a href="../../notes/compiler/DataFlowAnalysis.html">Data-Flow Analsyis</a></li>
                <li><a href="../../notes/compiler/StaticSingleAssignmentForm.html">Static Single Assignement Form</a></li>
                <li><a href="../../notes/compiler/CompilerOptimizations.html">Compiler Optimizations</a></li>
              </ul>
            </li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li><a href="https://github.com/farleylai"><i class="fa fa-github"></i></a></li>
            <li><a href="https://plus.google.com/+FarleyLai/"><i class="fa fa-google-plus"></i></a>
            <li><a href="https://www.linkedin.com/in/farleylai"><i class="fa fa-linkedin"></i></a>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>
    <div class="container">

	
	<div class="page-header">
		<h1>Monsoon Power Tool Web Service for Scripting</h1>
	</div>

	<p></i><em>17 June 2016</em>
        <i class="fa fa-tag"></i>
        
        <a href="/tags/Monsoon power monitor.html">Monsoon power monitor</a>
        
        <a href="/tags/ web service.html"> web service</a>
        
        <a href="/tags/ apache cxf.html"> apache cxf</a>
        
        <a href="/tags/ Gradle.html"> Gradle</a>
        
        <a href="/tags/ C#.html"> C#</a>
        </p>
	<p><h1 id="_monsoon_power_tool_web_service_for_scripting" class="sect0">Monsoon Power Tool Web Service for Scripting</h1>
<div class="paragraph">
<p>Farley Lai
2016-06-17 20:33:06 CDT
:jbake-type: post
:jbake-status: published
:jbake-tags: Monsoon power monitor, web service, apache cxf, Gradle, C#</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="http://farleylai.github.io/images/monsoonpm.jpg" alt="monsoonpm" width="800" height="Monsoon Power Monitor">
</div>
</div>
<div class="paragraph">
<p>Monsoon Power Monitor is commonly used by researchers and engineers to measure energy consumption at high frequency.
However, the lack of support for Mac OS X and Linux is a big turnoff and inconvenient.
The monsoon.py included in AOSP is problematic on Mac OS X. The serial port access over USB blocks indefinitely every so often until reboot.
The official support for Windows only renders virtual machine and web service as alternatives.
Unfortunately, accessing the device through a virtual machine is not guaranteed to work.
For example, the device enumeration API may return nothing, unlike on a real Windows machine.
Therefore, setting up the web service on real Windows for remote scripting would be the expedient solution.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="http://farleylai.github.io/images/monsoonws.png" alt="monsoonws" width="640" height="Monsoon Power PowerTool Web Service">
</div>
</div>
<div class="paragraph">
<p>The Monsoon PowerTool Web Service for scripting I created is hosted on <a href="https://github.com/farleylai/MonsoonPowerTool">GitHub</a>.
This project contains the server-side web service in C# and a Java client.
There is also a setup subproject for installation on Windows.
The Java client can be built with Gradle to test the remote web service and shows output as follows.</p>
</div>
<div class="literalblock">
<div class="title">Test Java client output</div>
<div class="content">
<pre>PowerToolServiceTest &gt; testPowerToolServiceSampling STANDARD_OUT
    Found connected Monsoon monitor of serial 6325
        Instant main channel: samples=14355, current=0.248630.2, voltage=3.690500.2
        Instant main channel: samples=24255, current=0.218130.2, voltage=3.690500.2</pre>
</div>
</div>
<div class="paragraph">
<p>View build.gradle for details to set the remote WSDL URL.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The Web Service APIs are based on PowerTool 4.0.5.2. while the client APIs depend on the actual stub code generation by Apache CXF.
Refer to the official <a href="http://msoon.github.io/powermonitor">developer&#8217;s guide</a> for the API overview.</p>
</div>
</td>
</tr>
</table>
</div></p>
        <div id="fb-root"></div>
        <script>(function(d, s, id) {
          var js, fjs = d.getElementsByTagName(s)[0];
          if (d.getElementById(id)) return;
          js = d.createElement(s); js.id = id;
          js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.4";
          fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));</script>
        <script language="javascript" type="text/javascript">
        function popup(url, w, h) {
            var dualScreenLeft = window.screenLeft != undefined ? window.screenLeft : screen.left;
            var dualScreenTop = window.screenTop != undefined ? window.screenTop : screen.top;
            var width = window.innerWidth ? window.innerWidth : document.documentElement.clientWidth ? document.documentElement.clientWidth : screen.width;
            var height = window.innerHeight ? window.innerHeight : document.documentElement.clientHeight ? document.documentElement.clientHeight : screen.height;
            var left = ((width / 2) - (w / 2)) + dualScreenLeft;
            var top = ((height / 2) - (h / 2)) + dualScreenTop;
            size='width=' + w + ',height=' + h;
            pos='top=' + top + ',left=' + left
            newwindow = window.open(url,'Share','menubar=no,toolbar=no,resizable=yes,scrollbars=yes,' + size + ',' + pos);
            if (window.focus) {newwindow.focus()}
            return false;
        }
        </script>
        <div class="fb-like" data-href="http://farleylai.github.io/blog/2016/monsoonws.html" data-layout="button_count" data-action="like" data-show-faces="true" data-share="true"></div>
        <a href="https://plus.google.com/share?url=http://farleylai.github.io/blog/2016/monsoonws.html" onclick="return popup(this.href, 500, 600);"><i class="fa fa-google-plus"></i></a>
        <a href="http://twitter.com/share?url=http://farleylai.github.io/blog/2016/monsoonws.html" onclick="return popup(this.href, 450, 300);"><i class="fa fa-twitter"></i></a>
        <a href="http://www.linkedin.com/shareArticle?mini=true&url=http://farleylai.github.io/blog/2016/monsoonws.html" onclick="return popup(this.href, 600, 600);"><i class="fa fa-linkedin"></i></a>
    <hr />
    <div id="disqus_thread">
        <script type="text/javascript">
            var disqus_shortname = 'farleylai';
            var disqus_identifier = 'null';
            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>
		</div>
		<div id="push"></div>
    </div>
    
    <div id="footer">
<!--
      <div class="container">
        <p class="muted credit">&copy; 2014 | Mixed with <a href="http://getbootstrap.com/">Bootstrap v3.1.1</a>
         | Baked with <a href="http://jbake.org">JBake v2.3.0</a></p>
      </div>
-->
      <div class="container">
        <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.en_US">
        <img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-nc-nd/3.0/88x31.png" /></a>
        This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.en_US">
        Creative Commons Attribution-NonCommercial-NoDerivs 3.0 Unported License</a>.
      </div>
    </div>
    
    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../../js/jquery-1.11.1.min.js"></script>
    <script src="../../js/bootstrap.min.js"></script>
    <script src="../../js/prettify.js"></script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-15840099-1', 'auto');
      ga('send', 'pageview');
    </script>
  </body>
</html>

